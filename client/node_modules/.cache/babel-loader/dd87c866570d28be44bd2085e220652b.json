{"ast":null,"code":"import { Ingredient, returnWeightOrVolume } from \"./Ingredient\";\nimport { makeAutoObservable } from 'mobx';\nexport class Recipe {\n  constructor(system, units, anchorIndex, recipeYield, name, ingredients) {\n    this.multiplier = 1;\n    this.data = void 0;\n    this.system = void 0;\n    this.units = void 0;\n    this.state = void 0;\n    this.name = void 0;\n    this.ingredients = void 0;\n    this.data = new Ingredient(); //unit data, UnitSelect component uses this.\n\n    makeAutoObservable(this); //mobx\n\n    this.system = system;\n    this.units = units;\n    this.state = `${this.system}_${this.units}`;\n    this.ingredients = []; //setters\n\n    this.anchorIndex = anchorIndex;\n    this.recipeYield = recipeYield;\n    if (name) this.name = name;\n    if (ingredients) this.ingredients = ingredients;\n  } // *** METHODS ***\n\n\n  set anchorIndex(index) {\n    this.anchorIndex = index;\n  }\n\n  set recipeYield(num) {} //change recipe system and/or unit\n\n\n  changeState(system, units) {\n    this.system = system;\n    this.units = units;\n    this.state = `${this.system}_${this.units}`;\n    return this;\n  } // *** ADD INGREDIENT ***\n\n\n  addIngredient(ingredient) {\n    this.ingredients.push(ingredient);\n    return this;\n  } // *** UPDATE MULTIPLIER ***\n\n\n  updateMultiplier(multiplier) {\n    //divide new multiplier by previous multiplier\n    const trueMultiplier = multiplier / this.multiplier; //update each ingredient weight and volume\n\n    for (const ingredient of this.ingredients) {\n      const {\n        weight,\n        volume\n      } = ingredient.standard; //may be undefined so update conditionally\n\n      if (weight) {\n        const newWeight = weight * trueMultiplier;\n        ingredient.updateValue(this.state, 'grams', newWeight);\n      }\n\n      if (volume) {\n        const newVol = volume * trueMultiplier;\n        ingredient.updateValue(this.state, 'grams', newVol);\n      }\n    } //set multiplier\n\n\n    this.multiplier = multiplier;\n  } //get bakers percent of ingredient, or update value by bakers perceent\n\n\n  bakersPercent(index, updatePercent) {\n    console.log(this.ingredients);\n    const anchor = this.ingredients[this.anchorIndex];\n    const weightOrVol = returnWeightOrVolume(this.state);\n\n    const milsOrGrams = weightOrVol => {\n      if (weightOrVol === 'weight') return 'grams';\n      if (weightOrVol === 'volume') return 'milliliters';\n      return '';\n    };\n\n    const anchorValue = anchor.standard[weightOrVol] || 0;\n    const ingredient = this.ingredients[index];\n    const ingredientValue = ingredient.standard[weightOrVol] || 0; //update value by bakers percent, if arg\n\n    if (updatePercent) {\n      const decimal = updatePercent / 100;\n      const newValue = anchorValue * decimal;\n      ingredient.updateValue(this.state, milsOrGrams(weightOrVol), newValue);\n      return updatePercent;\n    } //else return bakers percent\n\n\n    return ingredientValue / anchorValue * 100;\n  }\n\n}","map":{"version":3,"sources":["/Users/laurenceokite/Documents/projects/recipes/client/src/components/Recipe/Recipe.tsx"],"names":["Ingredient","returnWeightOrVolume","makeAutoObservable","Recipe","constructor","system","units","anchorIndex","recipeYield","name","ingredients","multiplier","data","state","index","num","changeState","addIngredient","ingredient","push","updateMultiplier","trueMultiplier","weight","volume","standard","newWeight","updateValue","newVol","bakersPercent","updatePercent","console","log","anchor","weightOrVol","milsOrGrams","anchorValue","ingredientValue","decimal","newValue"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,oBAArB,QAAiD,cAAjD;AACA,SAASC,kBAAT,QAAmC,MAAnC;AAMA,OAAO,MAAMC,MAAN,CAAa;AAUhBC,EAAAA,WAAW,CACPC,MADO,EAEPC,KAFO,EAGPC,WAHO,EAIPC,WAJO,EAMPC,IANO,EAOPC,WAPO,EAWX;AAAA,SApBAC,UAoBA,GApBa,CAoBb;AAAA,SAlBAC,IAkBA;AAAA,SAjBAP,MAiBA;AAAA,SAhBAC,KAgBA;AAAA,SAfAO,KAeA;AAAA,SAdAJ,IAcA;AAAA,SAbAC,WAaA;AAEI,SAAKE,IAAL,GAAY,IAAIZ,UAAJ,EAAZ,CAFJ,CAEiC;;AAE7BE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB,CAJJ,CAI6B;;AAEzB,SAAKG,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKO,KAAL,GAAc,GAAE,KAAKR,MAAO,IAAG,KAAKC,KAAM,EAA1C;AACA,SAAKI,WAAL,GAAmB,EAAnB,CATJ,CAWI;;AACA,SAAKH,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AAEA,QAAIC,IAAJ,EAAU,KAAKA,IAAL,GAAYA,IAAZ;AACV,QAAIC,WAAJ,EAAiB,KAAKA,WAAL,GAAmBA,WAAnB;AACpB,GAtCe,CAwChB;;;AAEe,MAAXH,WAAW,CAACO,KAAD,EAAgB;AAC3B,SAAKP,WAAL,GAAmBO,KAAnB;AACH;;AAEc,MAAXN,WAAW,CAACO,GAAD,EAAc,CAE5B,CAhDe,CAkDhB;;;AACAC,EAAAA,WAAW,CAACX,MAAD,EAAwBC,KAAxB,EAAoD;AAC3D,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AAEA,SAAKO,KAAL,GAAc,GAAE,KAAKR,MAAO,IAAG,KAAKC,KAAM,EAA1C;AAEA,WAAO,IAAP;AACH,GA1De,CA4DhB;;;AACAW,EAAAA,aAAa,CAACC,UAAD,EAAiC;AAC1C,SAAKR,WAAL,CAAiBS,IAAjB,CAAsBD,UAAtB;AACA,WAAO,IAAP;AACH,GAhEe,CAkEhB;;;AACAE,EAAAA,gBAAgB,CAACT,UAAD,EAAqB;AACjC;AACA,UAAMU,cAAc,GAAGV,UAAU,GAAG,KAAKA,UAAzC,CAFiC,CAIjC;;AACA,SAAK,MAAMO,UAAX,IAAyB,KAAKR,WAA9B,EAA2C;AACvC,YAAM;AAAEY,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAqBL,UAAU,CAACM,QAAtC,CADuC,CACS;;AAEhD,UAAIF,MAAJ,EAAY;AACR,cAAMG,SAAS,GAAGH,MAAM,GAAGD,cAA3B;AACAH,QAAAA,UAAU,CAACQ,WAAX,CAAuB,KAAKb,KAA5B,EAAmC,OAAnC,EAA4CY,SAA5C;AACH;;AAED,UAAIF,MAAJ,EAAY;AACR,cAAMI,MAAM,GAAGJ,MAAM,GAAGF,cAAxB;AACAH,QAAAA,UAAU,CAACQ,WAAX,CAAuB,KAAKb,KAA5B,EAAmC,OAAnC,EAA4Cc,MAA5C;AACH;AACJ,KAjBgC,CAkBjC;;;AACA,SAAKhB,UAAL,GAAkBA,UAAlB;AACH,GAvFe,CAyFhB;;;AACAiB,EAAAA,aAAa,CAACd,KAAD,EAAgBe,aAAhB,EAAgD;AACzDC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrB,WAAjB;AAEA,UAAMsB,MAAM,GAAG,KAAKtB,WAAL,CAAiB,KAAKH,WAAtB,CAAf;AAEA,UAAM0B,WAAW,GAAGhC,oBAAoB,CAAC,KAAKY,KAAN,CAAxC;;AAEA,UAAMqB,WAAW,GAAID,WAAD,IAAiC;AAEjD,UAAIA,WAAW,KAAK,QAApB,EAA8B,OAAO,OAAP;AAC9B,UAAIA,WAAW,KAAK,QAApB,EAA8B,OAAO,aAAP;AAC9B,aAAO,EAAP;AACH,KALD;;AAOA,UAAME,WAAW,GAAGH,MAAM,CAACR,QAAP,CAAgBS,WAAhB,KAAgC,CAApD;AAEA,UAAMf,UAAU,GAAG,KAAKR,WAAL,CAAiBI,KAAjB,CAAnB;AAEA,UAAMsB,eAAe,GAAGlB,UAAU,CAACM,QAAX,CAAoBS,WAApB,KAAoC,CAA5D,CAlByD,CAoBzD;;AACA,QAAIJ,aAAJ,EAAmB;AACf,YAAMQ,OAAO,GAAGR,aAAa,GAAG,GAAhC;AAEA,YAAMS,QAAQ,GAAGH,WAAW,GAAGE,OAA/B;AAEAnB,MAAAA,UAAU,CAACQ,WAAX,CAAuB,KAAKb,KAA5B,EAAmCqB,WAAW,CAACD,WAAD,CAA9C,EAA6DK,QAA7D;AAEA,aAAOT,aAAP;AACH,KA7BwD,CA+BzD;;;AACA,WAAQO,eAAe,GAAGD,WAAnB,GAAkC,GAAzC;AACH;;AA3He","sourcesContent":["import { Ingredient, returnWeightOrVolume } from \"./Ingredient\";\nimport { makeAutoObservable } from 'mobx'\n\ntype GlobalSystems = 'metric' | 'us';\ntype GlobalUnits = 'weight' | 'volume';\nexport type State = `${GlobalSystems}_${GlobalUnits}`;\n\nexport class Recipe {\n    multiplier = 1;\n\n    data: Ingredient;\n    system: GlobalSystems;\n    units: GlobalUnits;\n    state: State;\n    name?: string;\n    ingredients: Ingredient[];\n\n    constructor(\n        system: GlobalSystems, \n        units: GlobalUnits, \n        anchorIndex: number, \n        recipeYield: number,\n\n        name?: string, \n        ingredients?: Ingredient[],\n        \n    ) \n    \n    {\n\n        this.data = new Ingredient();//unit data, UnitSelect component uses this.\n\n        makeAutoObservable(this);//mobx\n\n        this.system = system;\n        this.units = units;\n        this.state = `${this.system}_${this.units}`\n        this.ingredients = [];\n\n        //setters\n        this.anchorIndex = anchorIndex;\n        this.recipeYield = recipeYield;\n        \n        if (name) this.name = name;\n        if (ingredients) this.ingredients = ingredients;\n    }\n\n    // *** METHODS ***\n\n    set anchorIndex(index: number) {\n        this.anchorIndex = index\n    }\n\n    set recipeYield(num: number) {\n\n    }\n\n    //change recipe system and/or unit\n    changeState(system: GlobalSystems, units: GlobalUnits): Recipe {\n        this.system = system;\n        this.units = units;\n        \n        this.state = `${this.system}_${this.units}`;\n\n        return this;\n    }\n\n    // *** ADD INGREDIENT ***\n    addIngredient(ingredient: Ingredient): Recipe {\n        this.ingredients.push(ingredient);\n        return this;\n    }\n\n    // *** UPDATE MULTIPLIER ***\n    updateMultiplier(multiplier: number) { \n        //divide new multiplier by previous multiplier\n        const trueMultiplier = multiplier / this.multiplier;\n\n        //update each ingredient weight and volume\n        for (const ingredient of this.ingredients) {\n            const { weight, volume } = ingredient.standard; //may be undefined so update conditionally\n\n            if (weight) {\n                const newWeight = weight * trueMultiplier;\n                ingredient.updateValue(this.state, 'grams', newWeight);\n            }\n\n            if (volume) {\n                const newVol = volume * trueMultiplier;\n                ingredient.updateValue(this.state, 'grams', newVol);\n            }\n        }\n        //set multiplier\n        this.multiplier = multiplier;\n    }\n\n    //get bakers percent of ingredient, or update value by bakers perceent\n    bakersPercent(index: number, updatePercent?: number): number {\n        console.log(this.ingredients)\n\n        const anchor = this.ingredients[this.anchorIndex];\n\n        const weightOrVol = returnWeightOrVolume(this.state);\n\n        const milsOrGrams = (weightOrVol: string): string => {\n\n            if (weightOrVol === 'weight') return 'grams';\n            if (weightOrVol === 'volume') return 'milliliters';\n            return '';\n        }\n\n        const anchorValue = anchor.standard[weightOrVol] || 0;\n\n        const ingredient = this.ingredients[index];\n\n        const ingredientValue = ingredient.standard[weightOrVol] || 0;\n\n        //update value by bakers percent, if arg\n        if (updatePercent) {\n            const decimal = updatePercent / 100;\n\n            const newValue = anchorValue * decimal;\n\n            ingredient.updateValue(this.state, milsOrGrams(weightOrVol), newValue);\n\n            return updatePercent;\n        }\n\n        //else return bakers percent\n        return (ingredientValue / anchorValue) * 100;\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}